<section class="content-header">

  <section class="content">

  <form #form="ngForm" novalidate>
      <div class="col-sm-4 col-xs-6">
        <div class="form-group">
          <label class="control-label sr-only" for="inputSuccess"><i class="fa fa-check"></i> Selecione o módulo:</label>
          <div class="col-xs-12">
            <p class="control-label"> Selecione o Usuário </p>
          </div>
          <div class="col-sm-12 col-xs-6">
            <select #idUsuario
                required
                placeholder="Usuários"
                name="idUsuario"
                id="idUsuario"
                class="form-control"
                ngModel="0">
                <option [value]="0"> SELECIONE </option>
                <option *ngFor="let item of usuarios" [value]="item.id" ngModel="0">{{ item.nome.toUpperCase() }}</option>
            </select>
          </div>

        </div>
      </div>

      <div class="col-sm-4 col-xs-6">
        <div class="form-group">
          <label class="control-label sr-only" for="inputSuccess"><i class="fa fa-check"></i> Selecione o módulo:</label>
          <div class="col-xs-12">
            <p class="control-label"> Selecione o Módulo </p>
          </div>
          <div class="col-sm-6 col-xs-6">
            <select (change)="getAcessosFuncionalidade(idUsuario.value, idModulo.value)" #idModulo
                required
                placeholder="Módulo"
                name="idModulo"
                id="idModulo"
                class="form-control"
                ngModel="0">
                <option [value]="0"> SELECIONE </option>
                <option *ngFor="let item of modulos" [value]="item.id" >{{ item.descricao.toUpperCase() }}</option>
            </select>
          </div>

        </div>

        <br>
        <br>

      </div>

      <div style="width: 65%;">

        <div class="row">
            <div class="col-xs-11">
              <button (click)="putAcessos(idUsuario.value, idModulo.value)" class="btn btn-success pull-right"
              [disabled]="!form.valid"><i></i> Salvar
              </button>
              <button (click)="cancelar()" class="btn btn-primary pull-right"><i></i> Cancelar
              </button>
            </div>
        </div>
      </div>

    <br>

    <section class="content">
      <form [formGroup]="myForm">
        <table ngModel class="table-striped" style="width: 60%;">
          <thead>
            <tr>
                <th class="pointer" scope="col" [appSort]="perfilFuncionalidades" data-order="desc" data-name="id" style="width: 50px;"><span>ID</span></th>
                <th class="pointer" scope="col" [appSort]="perfilFuncionalidades" data-order="desc" data-name="funcionalidade">Funcionalidade</th>
                <th style="width: 30px;" scope="col"></th>
            </tr>
          </thead>
          <tbody>
            <tr  *ngFor="let func of perfilFuncionalidades | paginate: { itemsPerPage: contador, currentPage: pag }">
              <td class="textCenter" >
                <div class="pointer">{{ formatId(func.idFuncionalidade, 6) }}</div>
              </td>
              <td>
                  <div class="pointer">{{ func.nomeFuncionalidade.toUpperCase() }}</div>
              </td>
              <td class="textCenter">
                <div class="pointer">
                  <input type="checkbox" (change)="addAcesso(func, $event.target.checked)" name="acesso" id="acesso" #acesso [checked]="func.acesso" />
                </div>
              </td>
            </tr>
          </tbody>
        </table>

        <!--inclindo o controle de paginação.-->
        <div style="padding: 20px; width: 60%;">
          <div class="text-right">
            <pagination-controls class="pointer" (pageChange)="pageChanged($event)"
              previousLabel="Anterior"
              nextLabel="Próximo"></pagination-controls>
          </div>
        </div>
      </form>

    </section>
   </form>
  </section>
</section>
